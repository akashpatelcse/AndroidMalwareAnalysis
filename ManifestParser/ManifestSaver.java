package ManifestParser;

import net.dongliu.apk.parser.ApkFile;
import net.dongliu.apk.parser.bean.ApkMeta;

import java.io.*;
import java.util.Map;

import static ManifestParser.util.utilities.getFiles;
import static ManifestParser.util.utilities.getManifest;

public class ManifestSaver {
    static String[] folders = new String[]{"/home/akash/Documents/Dataset/Goodware 2010-12"};//, "/home/akash/Documents/Dataset/Goodware 2010-12"};

    public static void main(String[] args)
    {
        long start2 = System.currentTimeMillis();
        for(String folder : folders) {
            String[] Files = getFiles(folder);
            for (String fileName : Files) {
                try {
                    apkDetails(folder + "/" + fileName, fileName);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            System.out.println("Number of Files" + Files.length);
        }

        long end2 = System.currentTimeMillis();

        System.out.println("Time = " + Long.toString(end2 - start2));
        manifestParser.printHM();
    }

    static void apkDetails(String filePath, String fileName){
        try {
            String mani = getManifest(filePath);
            String newFileName = "/home/akash/Documents/ManifestFiles/Goodware/"+fileName;
          //  System.out.println(mani);

            try (BufferedWriter writer = new BufferedWriter(new FileWriter(newFileName))) {
                writer.write(mani);

            } catch (IOException ignored) {
            }

        } catch (Exception e) {
            System.out.println(e);
        }
    }
}
