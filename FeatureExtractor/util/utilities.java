package FeatureExtractor.util;

import net.dongliu.apk.parser.ApkFile;

import java.io.*;
import java.util.TreeMap;

public class utilities {

    public static String[] getFiles(String folder){
        //https://stackoverflow.com/a/32480517/13556499
        File dir = new File(folder);
        String[] files = dir.list();
        if (files.length == 0) {
            System.out.println("The directory is empty");
        } else {
            for (String aFile : files) {
                //System.out.println(aFile);
            }
        }
        return files;
    }

    public static String getManifest(String filePath) {
        try (ApkFile apkFile = new ApkFile(new File(filePath))) {
            return apkFile.getManifestXml();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return " ";
    }

    public static TreeMap<String, Integer> createHM(String filePath){
        TreeMap<String, Integer> hm =  new TreeMap<String, Integer>();
        File file=new File(filePath);
        FileReader fr= null;
        try {
            fr = new FileReader(file);
            BufferedReader br=new BufferedReader(fr);
            String line;
            while((line=br.readLine())!=null)
            {
                String key = line.trim().split(":")[0];
                boolean allLetters = line.chars().allMatch(Character::isLetter);
                if(allLetters)
                    continue;
                hm.put(key,0);
              //  System.out.println(key);
            }
            fr.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return hm;
    }

}
